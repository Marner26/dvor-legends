<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Dvor Legends Multiplayer</title>
<script src="/socket.io/socket.io.js"></script>
<style>
body { background:#0f0f1a; color:white; font-family:Arial; text-align:center; }
button { padding:8px 15px; margin:5px; background:#1f1f3d; color:white; border:none; }
#chat { height:150px; overflow-y:scroll; border:1px solid #00ffff; margin:10px; padding:5px; }
</style>
</head>
<body>

<h1>ğŸ¢ DVOR LEGENDS ONLINE</h1>

<div id="login">
<input id="username" placeholder="Enter username">
<button onclick="join()">Join</button>
</div>

<div id="game" style="display:none;">
<button onclick="rapBattle()">ğŸ¤ Rap Battle</button>

<h2>ğŸ“Š Players</h2>
<div id="players"></div>

<h2>ğŸ’¬ Dvor Chat</h2>
<div id="chat"></div>
<input id="msg">
<button onclick="sendMessage()">Send</button>
</div>

<script>
const socket = io();

function join() {
    const username = document.getElementById("username").value;
    if (!username) return;
    socket.emit("joinGame", username);
    document.getElementById("login").style.display = "none";
    document.getElementById("game").style.display = "block";
}

function rapBattle() {
    socket.emit("rapBattle");
}

function sendMessage() {
    const msg = document.getElementById("msg").value;
    socket.emit("chatMessage", msg);
    document.getElementById("msg").value = "";
}

socket.on("updatePlayers", (players) => {
    let html = "";
    for (let id in players) {
        let p = players[id];
        html += `<p>${p.username} | ğŸ”¥ ${p.street} | ğŸ˜‚ ${p.meme}</p>`;
    }
    document.getElementById("players").innerHTML = html;
});

socket.on("chatMessage", (data) => {
    let chat = document.getElementById("chat");
    chat.innerHTML += `<p><b>${data.username}:</b> ${data.message}</p>`;
});
</script>

</body>
</html>
