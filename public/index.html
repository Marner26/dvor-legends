<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Dvor Legends</title>
<style>
    body {
        margin: 0;
        font-family: 'Arial', sans-serif;
        background: #0f0f1a;
        color: #ffffff;
        text-align: center;
    }

    h1 {
        margin-top: 20px;
        color: #ff00ff;
        text-shadow: 2px 2px #00ffff;
    }

    #stats {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin: 20px 0;
    }

    .stat {
        background: #1f1f3d;
        padding: 15px;
        border-radius: 10px;
        border: 2px solid #00ffff;
        width: 120px;
        text-align: center;
    }

    button {
        background: #1f1f3d;
        color: #00ffff;
        border: none;
        border-radius: 5px;
        padding: 10px 20px;
        margin: 5px;
        font-size: 16px;
        cursor: pointer;
        transition: 0.2s;
    }

    button:hover {
        color: #ff00ff;
        transform: scale(1.05);
    }

    #chat {
        background: #10101f;
        border: 2px solid #00ffff;
        padding: 10px;
        width: 400px;
        max-height: 200px;
        margin: 20px auto;
        overflow-y: scroll;
        border-radius: 10px;
    }

    #chat input {
        width: 70%;
        padding: 8px;
        border-radius: 5px;
        border: 1px solid #00ffff;
        background: #1f1f3d;
        color: #fff;
    }

    #chat button {
        width: 25%;
        padding: 8px;
    }

    .message {
        text-align: left;
        margin: 5px 0;
    }

    .system {
        color: #ff00ff;
        font-weight: bold;
    }
</style>
</head>
<body>

<h1>üî• Dvor Legends üî•</h1>

<input type="text" id="username" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫">
<button id="joinBtn">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</button>

<div id="stats">
    <div class="stat" id="street">–†–µ–ø —É–ª–∏—Ü: 0 üî•</div>
    <div class="stat" id="smart">–£–º: 0 üß†</div>
    <div class="stat" id="meme">–ú–µ–º—ã: 0 üòÇ</div>
    <div class="stat" id="drip">–°—Ç–∏–ª—å: 0 üëï</div>
</div>

<button id="rapBtn">–†—ç–ø –±–∞—Ç—Ç–ª üé§</button>

<div id="chat">
    <div id="messages"></div>
    <input id="msgInput" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ">
    <button id="sendBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
</div>

<script src="/socket.io/socket.io.js"></script>
<script>
const socket = io();
let playerJoined = false;

document.getElementById("joinBtn").onclick = () => {
    const username = document.getElementById("username").value.trim();
    if (!username) return alert("–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫!");
    socket.emit("joinGame", username);
    playerJoined = true;
};

document.getElementById("rapBtn").onclick = () => {
    if (!playerJoined) return alert("–°–Ω–∞—á–∞–ª–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å!");
    socket.emit("rapBattle");
};

document.getElementById("sendBtn").onclick = () => {
    const msg = document.getElementById("msgInput").value.trim();
    if (!msg) return;
    socket.emit("chatMessage", msg);
    document.getElementById("msgInput").value = "";
};

socket.on("updatePlayers", (players) => {
    const p = players[socket.id];
    if (!p) return;
    document.getElementById("street").innerText = `–†–µ–ø —É–ª–∏—Ü: ${p.street} üî•`;
    document.getElementById("smart").innerText = `–£–º: ${p.smart} üß†`;
    document.getElementById("meme").innerText = `–ú–µ–º—ã: ${p.meme} üòÇ`;
    document.getElementById("drip").innerText = `–°—Ç–∏–ª—å: ${p.drip} üëï`;
});

socket.on("chatMessage", ({username, message}) => {
    const msgDiv = document.createElement("div");
    msgDiv.classList.add("message");
    msgDiv.innerHTML = `<b>${username}:</b> ${message}`;
    document.getElementById("messages").appendChild(msgDiv);
    document.getElementById("messages").scrollTop = document.getElementById("messages").scrollHeight;
});
</script>
</body>
</html>
